/**
 *   ESP32 SvelteKit
 *
 *   A simple, secure and extensible framework for IoT projects for ESP32 platforms
 *   with responsive Sveltekit front-end built with TailwindCSS and DaisyUI.
 *   https://github.com/theelims/ESP32-sveltekit
 *
 *   Copyright (C) 2018 - 2023 rjwats
 *   Copyright (C) 2023 - 2024 theelims
 *
 *   All Rights Reserved. This software may be modified and distributed under
 *   the terms of the LGPL v3 license. See the LICENSE file for details.
 **/

#include <ESP32SvelteKit.h>
#include <LightMqttSettingsService.h>
#include <LightStateService.h>
#include <PsychicHttpServer.h>
#include <FastLED.h>
#include <OneButton.h>

#define SERIAL_BAUD_RATE 115200

PsychicHttpServer server;

ESP32SvelteKit esp32sveltekit(&server, 120);

LightMqttSettingsService lightMqttSettingsService = LightMqttSettingsService(&server,
                                                                             esp32sveltekit.getFS(),
                                                                             esp32sveltekit.getSecurityManager());

LightStateService lightStateService = LightStateService(&server,
                                                        esp32sveltekit.getSocket(),
                                                        esp32sveltekit.getSecurityManager(),
                                                        esp32sveltekit.getMqttClient(),
                                                        &lightMqttSettingsService);

// How many leds in your strip?
#define NUM_LEDS 1

// For led chips like WS2812, which have a data line, ground, and power, you just
// need to define DATA_PIN.  For led chipsets that are SPI based (four wires - data, clock,
// ground, and power), like the LPD8806 define both DATA_PIN and CLOCK_PIN
// Clock pin only needed for SPI based chipsets when not using hardware SPI
#define DATA_PIN 13
#define BRIGHTNESS  30
#define COLOR_ORDER GRB
#define LED_TYPE    WS2812B
CRGB leds[NUM_LEDS];
#define UPDATES_PER_SECOND 20

int IRledPin = 21;  
#define BUTTON_PIN 14

CRGBPalette16 currentPalette;
TBlendType    currentBlending;
extern CRGBPalette16 myRedWhiteBluePalette;
extern const TProgmemPalette16 myRedWhiteBluePalette_p PROGMEM;

// setting PWM properties
const int freq = 5000;
const int ledChannel = 0;
const int resolution = 8;

int B[4];
int P[6];
int T[2];
int D[8];
int C[1];
int X[2];
int Z[2];

int BulletType = 0;
int Player = 0;
int Team = 0;
int Damage = 0;
int Critical = 0;
int Power = 0;



OneButton btn = OneButton(
  BUTTON_PIN,  // Input pin for the button
  true,        // Button is active LOW
  true         // Enable internal pull-up resistor
);



void pulseIR(long microsecs) {
  // we'll count down from the number of microseconds we are told to wait
  cli();  // this turns off any background interrupts
  while (microsecs > 0) {
    // 38 kHz is about 13 microseconds high and 13 microseconds low
    digitalWrite(IRledPin, HIGH);  // this takes about 3 microseconds to happen
    delayMicroseconds(11);         // hang out for 10 microseconds, you can also change this to 9 if its not working
    digitalWrite(IRledPin, LOW);   // this also takes about 3 microseconds
    delayMicroseconds(11);         // hang out for 10 microseconds, you can also change this to 9 if its not working
    // so 26 microseconds altogether
    microsecs -= 26;
  }
  sei();  // this turns them back on.
}

void SwapBRX() {
  BulletType = 1;
  Player = 0;
  Team = 0;
  Damage = 1;
  Critical = 0;
  Power = 1;
}
void Explosion() {
  BulletType = 10;
  Player = 63;
  Team = 2;
  Damage = 200;
  Critical = 0;
  Power = 0;
}
void SendIR() {
  Serial.println("Sending IR signal");
  pulseIR(2000); // sync
  delayMicroseconds(500); // delay
  pulseIR(B[0]); // B1
  delayMicroseconds(500); // delay
  pulseIR(B[1]); // B2
  delayMicroseconds(500); // delay
  pulseIR(B[2]); // B3
  delayMicroseconds(500); // delay
  pulseIR(B[3]); // B4
  delayMicroseconds(500); // delay
  pulseIR(P[0]); // P1
  delayMicroseconds(500); // delay
  pulseIR(P[1]); // P2
  delayMicroseconds(500); // delay
  pulseIR(P[2]); // P3
  delayMicroseconds(500); // delay
  pulseIR(P[3]); // P4
  delayMicroseconds(500); // delay
  pulseIR(P[4]); // P5
  delayMicroseconds(500); // delay
  pulseIR(P[5]); // P6
  delayMicroseconds(500); // delay
  pulseIR(T[0]); // T1
  delayMicroseconds(500); // delay
  pulseIR(T[1]); // T2
  delayMicroseconds(500); // delay
  pulseIR(D[0]); // D1
  delayMicroseconds(500); // delay
  pulseIR(D[1]); // D2
  delayMicroseconds(500); // delay
  pulseIR(D[2]); // D3
  delayMicroseconds(500); // delay
  pulseIR(D[3]); // D4
  delayMicroseconds(500); // delay
  pulseIR(D[4]); // D5
  delayMicroseconds(500); // delay
  pulseIR(D[5]); // D6
  delayMicroseconds(500); // delay
  pulseIR(D[6]); // D7
  delayMicroseconds(500); // delay
  pulseIR(D[7]); // D8
  delayMicroseconds(500); // delay
  pulseIR(C[0]); // C1
  delayMicroseconds(500); // delay
  pulseIR(X[0]); // X1
  delayMicroseconds(500); // delay
  pulseIR(X[1]); // X2
  delayMicroseconds(500); // delay
  pulseIR(Z[0]); // Z1
  delayMicroseconds(500); // delay
  pulseIR(Z[1]); // Z1
}

void PrintTag() {
  // prints each individual bit on serial monitor
  Serial.println("Tag!!");
  Serial.print("B0: "); Serial.println(B[0]);
  Serial.print("B1: "); Serial.println(B[1]);
  Serial.print("B2: "); Serial.println(B[2]);
  Serial.print("B3: "); Serial.println(B[3]);
  Serial.print("P0: "); Serial.println(P[0]);
  Serial.print("P1: "); Serial.println(P[1]);
  Serial.print("P2: "); Serial.println(P[2]);
  Serial.print("P3: "); Serial.println(P[3]);
  Serial.print("P4: "); Serial.println(P[4]);
  Serial.print("P5: "); Serial.println(P[5]);
  Serial.print("T0: "); Serial.println(T[0]);
  Serial.print("T1: "); Serial.println(T[1]);
  Serial.print("D0: "); Serial.println(D[0]);
  Serial.print("D1: "); Serial.println(D[1]);
  Serial.print("D2: "); Serial.println(D[2]);
  Serial.print("D3: "); Serial.println(D[3]);
  Serial.print("D4: "); Serial.println(D[4]);
  Serial.print("D5: "); Serial.println(D[5]);
  Serial.print("D6: "); Serial.println(D[6]);
  Serial.print("D7: "); Serial.println(D[7]);
  Serial.print("C0: "); Serial.println(C[0]);
  Serial.print("X0: "); Serial.println(X[0]);
  Serial.print("X1: "); Serial.println(X[1]);
  Serial.print("Z0: "); Serial.println(Z[0]);
  Serial.print("Z1: "); Serial.println(Z[1]);
  Serial.println();
}
void paritycheck() {
  // parity changes, parity starts as even as if zero 1's
  // are present in the protocol recieved and being sent
  int parity = 0;
  if (B[0] > 750) {
    if (parity == 0) {parity = 1;}
    else {parity = 0;}
  }
  if (B[1] > 750) {
    if (parity == 0) {parity = 1;}
    else {parity = 0;}
  }
  if (B[2] > 750) {
    if (parity == 0) {parity = 1;}
    else {parity = 0;}
  }
  if (B[3] > 750) {
    if (parity == 0) {parity = 1;}
    else {parity = 0;}
  }
  if (P[0] > 750) {
    if (parity == 0) {parity = 1;}
    else {parity = 0;}
  }
  if (P[1] > 750) {
    if (parity == 0) {parity = 1;}
    else {parity = 0;}
  }
  if (P[2] > 750) {
    if (parity == 0) {parity = 1;}
    else {parity = 0;}
  }
  if (P[3] > 750) {
    if (parity == 0) {parity = 1;}
    else {parity = 0;}
  }
  if (P[4] > 750) {
    if (parity == 0) {parity = 1;}
    else {parity = 0;}
  }
  if (P[5] > 750) {
    if (parity == 0) {parity = 1;}
    else {parity = 0;}
  }
  if (T[0] > 750) {
    if (parity == 0) {parity = 1;}
    else {parity = 0;}
  }
  if (T[1] > 750) {
    if (parity == 0) {parity = 1;}
    else {parity = 0;}
  }
  if (D[0] > 750) {
    if (parity == 0) {parity = 1;}
    else {parity = 0;}
  }
  if (D[1] > 750) {
    if (parity == 0) {parity = 1;}
    else {parity = 0;}
  }
  if (D[2] > 750) {
    if (parity == 0) {parity = 1;}
    else {parity = 0;}
  }
  if (D[3] > 750) {
    if (parity == 0) {parity = 1;}
    else {parity = 0;}
  }
  if (D[4] > 750) {
    if (parity == 0) {parity = 1;}
    else {parity = 0;}
  }
  if (D[5] > 750) {
    if (parity == 0) {parity = 1;}
    else {parity = 0;}
  }
  if (D[6] > 750) {
    if (parity == 0) {parity = 1;}
    else {parity = 0;}
  }
  if (D[7] > 750) {
    if (parity == 0) {parity = 1;}
    else {parity = 0;}
  }
  if (C[0] > 750) {
    if (parity == 0) {parity = 1;}
    else {parity = 0;}
  }
  if (X[0] > 750) {
    if (parity == 0) {parity = 1;}
    else {parity = 0;}
  }
  if (X[1] > 750) {
    if (parity == 0) {parity = 1;}
    else {parity = 0;}
  }
  if (parity == 0) {
    Z[0]=1000;
    Z[1]=500;
  }
  else {
    Z[0]=500;
    Z[1]=1000;
  }
  Serial.println("Modified Parity Bits:");
  Serial.println(Z[0]);
  Serial.println(Z[1]);
}


void SetIRProtocol() {
// Set Player ID
if (Player==0) {P[0]=500; P[1]=500; P[2]=500; P[3]=500; P[4]=500; P[5]=500;}
if (Player==1) {P[0]=500; P[1]=500; P[2]=500; P[3]=500; P[4]=500; P[5]=1000;}
if (Player==2) {P[0]=500; P[1]=500; P[2]=500; P[3]=500; P[4]=1000; P[5]=500;}
if (Player==3) {P[0]=500; P[1]=500; P[2]=500; P[3]=500; P[4]=1000; P[5]=1000;}
if (Player==4) {P[0]=500; P[1]=500; P[2]=500; P[3]=1000; P[4]=500; P[5]=500;}
if (Player==5) {P[0]=500; P[1]=500; P[2]=500; P[3]=1000; P[4]=500; P[5]=1000;}
if (Player==6) {P[0]=500; P[1]=500; P[2]=500; P[3]=1000; P[4]=1000; P[5]=500;}
if (Player==7) {P[0]=500; P[1]=500; P[2]=500; P[3]=1000; P[4]=1000; P[5]=1000;}
if (Player==8) {P[0]=500; P[1]=500; P[2]=1000; P[3]=500; P[4]=500; P[5]=500;}
if (Player==9) {P[0]=500; P[1]=500; P[2]=1000; P[3]=500; P[4]=500; P[5]=1000;}
if (Player==10) {P[0]=500; P[1]=500; P[2]=1000; P[3]=500; P[4]=1000; P[5]=500;}
if (Player==11) {P[0]=500; P[1]=500; P[2]=1000; P[3]=500; P[4]=1000; P[5]=1000;}
if (Player==12) {P[0]=500; P[1]=500; P[2]=1000; P[3]=1000; P[4]=500; P[5]=500;}
if (Player==13) {P[0]=500; P[1]=500; P[2]=1000; P[3]=1000; P[4]=500; P[5]=1000;}
if (Player==14) {P[0]=500; P[1]=500; P[2]=1000; P[3]=1000; P[4]=1000; P[5]=500;}
if (Player==15) {P[0]=500; P[1]=500; P[2]=1000; P[3]=1000; P[4]=1000; P[5]=1000;}
if (Player==16) {P[0]=500; P[1]=1000; P[2]=500; P[3]=500; P[4]=500; P[5]=500;}
if (Player==17) {P[0]=500; P[1]=1000; P[2]=500; P[3]=500; P[4]=500; P[5]=1000;}
if (Player==18) {P[0]=500; P[1]=1000; P[2]=500; P[3]=500; P[4]=1000; P[5]=500;}
if (Player==19) {P[0]=500; P[1]=1000; P[2]=500; P[3]=500; P[4]=1000; P[5]=1000;}
if (Player==20) {P[0]=500; P[1]=1000; P[2]=500; P[3]=1000; P[4]=500; P[5]=500;}
if (Player==21) {P[0]=500; P[1]=1000; P[2]=500; P[3]=1000; P[4]=500; P[5]=1000;}
if (Player==22) {P[0]=500; P[1]=1000; P[2]=500; P[3]=1000; P[4]=1000; P[5]=500;}
if (Player==23) {P[0]=500; P[1]=1000; P[2]=500; P[3]=1000; P[4]=1000; P[5]=1000;}
if (Player==24) {P[0]=500; P[1]=1000; P[2]=1000; P[3]=500; P[4]=500; P[5]=500;}
if (Player==25) {P[0]=500; P[1]=1000; P[2]=1000; P[3]=500; P[4]=500; P[5]=1000;}
if (Player==26) {P[0]=500; P[1]=1000; P[2]=1000; P[3]=500; P[4]=1000; P[5]=500;}
if (Player==27) {P[0]=500; P[1]=1000; P[2]=1000; P[3]=500; P[4]=1000; P[5]=1000;}
if (Player==28) {P[0]=500; P[1]=1000; P[2]=1000; P[3]=1000; P[4]=500; P[5]=500;}
if (Player==29) {P[0]=500; P[1]=1000; P[2]=1000; P[3]=1000; P[4]=500; P[5]=1000;}
if (Player==30) {P[0]=500; P[1]=1000; P[2]=1000; P[3]=1000; P[4]=1000; P[5]=500;}
if (Player==31) {P[0]=500; P[1]=1000; P[2]=1000; P[3]=1000; P[4]=1000; P[5]=1000;}
if (Player==32) {P[0]=1000; P[1]=500; P[2]=500; P[3]=500; P[4]=500; P[5]=500;}
if (Player==33) {P[0]=1000; P[1]=500; P[2]=500; P[3]=500; P[4]=500; P[5]=1000;}
if (Player==34) {P[0]=1000; P[1]=500; P[2]=500; P[3]=500; P[4]=1000; P[5]=500;}
if (Player==35) {P[0]=1000; P[1]=500; P[2]=500; P[3]=500; P[4]=1000; P[5]=1000;}
if (Player==36) {P[0]=1000; P[1]=500; P[2]=500; P[3]=1000; P[4]=500; P[5]=500;}
if (Player==37) {P[0]=1000; P[1]=500; P[2]=500; P[3]=1000; P[4]=500; P[5]=1000;}
if (Player==38) {P[0]=1000; P[1]=500; P[2]=500; P[3]=1000; P[4]=1000; P[5]=500;}
if (Player==39) {P[0]=1000; P[1]=500; P[2]=500; P[3]=1000; P[4]=1000; P[5]=1000;}
if (Player==40) {P[0]=1000; P[1]=500; P[2]=1000; P[3]=500; P[4]=500; P[5]=500;}
if (Player==41) {P[0]=1000; P[1]=500; P[2]=1000; P[3]=500; P[4]=500; P[5]=1000;}
if (Player==42) {P[0]=1000; P[1]=500; P[2]=1000; P[3]=500; P[4]=1000; P[5]=500;}
if (Player==43) {P[0]=1000; P[1]=500; P[2]=1000; P[3]=500; P[4]=1000; P[5]=1000;}
if (Player==44) {P[0]=1000; P[1]=500; P[2]=1000; P[3]=1000; P[4]=500; P[5]=500;}
if (Player==45) {P[0]=1000; P[1]=500; P[2]=1000; P[3]=1000; P[4]=500; P[5]=1000;}
if (Player==46) {P[0]=1000; P[1]=500; P[2]=1000; P[3]=1000; P[4]=1000; P[5]=500;}
if (Player==47) {P[0]=1000; P[1]=500; P[2]=1000; P[3]=1000; P[4]=1000; P[5]=1000;}
if (Player==48) {P[0]=1000; P[1]=1000; P[2]=500; P[3]=500; P[4]=500; P[5]=500;}
if (Player==49) {P[0]=1000; P[1]=1000; P[2]=500; P[3]=500; P[4]=500; P[5]=1000;}
if (Player==50) {P[0]=1000; P[1]=1000; P[2]=500; P[3]=500; P[4]=1000; P[5]=500;}
if (Player==51) {P[0]=1000; P[1]=1000; P[2]=500; P[3]=500; P[4]=1000; P[5]=1000;}
if (Player==52) {P[0]=1000; P[1]=1000; P[2]=500; P[3]=1000; P[4]=500; P[5]=500;}
if (Player==53) {P[0]=1000; P[1]=1000; P[2]=500; P[3]=1000; P[4]=500; P[5]=1000;}
if (Player==54) {P[0]=1000; P[1]=1000; P[2]=500; P[3]=1000; P[4]=1000; P[5]=500;}
if (Player==55) {P[0]=1000; P[1]=1000; P[2]=500; P[3]=1000; P[4]=1000; P[5]=1000;}
if (Player==56) {P[0]=1000; P[1]=1000; P[2]=1000; P[3]=500; P[4]=500; P[5]=500;}
if (Player==57) {P[0]=1000; P[1]=1000; P[2]=1000; P[3]=500; P[4]=500; P[5]=1000;}
if (Player==58) {P[0]=1000; P[1]=1000; P[2]=1000; P[3]=500; P[4]=1000; P[5]=500;}
if (Player==59) {P[0]=1000; P[1]=1000; P[2]=1000; P[3]=500; P[4]=1000; P[5]=1000;}
if (Player==60) {P[0]=1000; P[1]=1000; P[2]=1000; P[3]=1000; P[4]=500; P[5]=500;}
if (Player==61) {P[0]=1000; P[1]=1000; P[2]=1000; P[3]=1000; P[4]=500; P[5]=1000;}
if (Player==62) {P[0]=1000; P[1]=1000; P[2]=1000; P[3]=1000; P[4]=1000; P[5]=500;}
if (Player==63) {P[0]=1000; P[1]=1000; P[2]=1000; P[3]=1000; P[4]=1000; P[5]=1000;}
// Set Bullet Type
if (BulletType==0) {B[0]=500; B[1]=500; B[2]=500; B[3]=500;}
if (BulletType==1) {B[0]=500; B[1]=500; B[2]=500; B[3]=1000;}
if (BulletType==2) {B[0]=500; B[1]=500; B[2]=1000; B[3]=500;}
if (BulletType==3) {B[0]=500; B[1]=500; B[2]=1000; B[3]=1000;}
if (BulletType==4) {B[0]=500; B[1]=1000; B[2]=500; B[3]=500;}
if (BulletType==5) {B[0]=500; B[1]=1000; B[2]=500; B[3]=1000;}
if (BulletType==6) {B[0]=500; B[1]=1000; B[2]=1000; B[3]=500;}
if (BulletType==7) {B[0]=500; B[1]=1000; B[2]=1000; B[3]=1000;}
if (BulletType==8) {B[0]=1000; B[1]=500; B[2]=500; B[3]=500;}
if (BulletType==9) {B[0]=1000; B[1]=500; B[2]=500; B[3]=1000;}
if (BulletType==10) {B[0]=1000; B[1]=500; B[2]=1000; B[3]=500;}
if (BulletType==11) {B[0]=1000; B[1]=500; B[2]=1000; B[3]=1000;}
if (BulletType==12) {B[0]=1000; B[1]=1000; B[2]=500; B[3]=500;}
if (BulletType==13) {B[0]=1000; B[1]=1000; B[2]=500; B[3]=1000;}
if (BulletType==14) {B[0]=1000; B[1]=1000; B[2]=1000; B[3]=500;}
if (BulletType==15) {B[0]=1000; B[1]=1000; B[2]=1000; B[3]=1000;}
// SETS PLAYER TEAM
if (Team==0) {T[0]=500; T[1]=500;} // RED
if (Team==1) {T[0]=500; T[1]=1000;} // BLUE
if (Team==2) {T[0]=1000; T[1]=500;} // YELLOW
if (Team==3) {T[0]=1000; T[1]=1000;} // GREEN
// SETS Damage
if (Damage==0) {D[0] = 500; D[1] = 500; D[2] = 500; D[3] = 500; D[4] = 500; D[5] = 500; D[6] = 500; D[7] = 500;}
if (Damage==1) {D[0] = 500; D[1] = 500; D[2] = 500; D[3] = 500; D[4] = 500; D[5] = 500; D[6] = 500; D[7] = 1000;}
if (Damage==2) {D[0] = 500; D[1] = 500; D[2] = 500; D[3] = 500; D[4] = 500; D[5] = 500; D[6] = 1000; D[7] = 500;}
if (Damage==3) {D[0] = 500; D[1] = 500; D[2] = 500; D[3] = 500; D[4] = 500; D[5] = 500; D[6] = 1000; D[7] = 1000;}
if (Damage==4) {D[0] = 500; D[1] = 500; D[2] = 500; D[3] = 500; D[4] = 500; D[5] = 1000; D[6] = 500; D[7] = 500;}
if (Damage==5) {D[0] = 500; D[1] = 500; D[2] = 500; D[3] = 500; D[4] = 500; D[5] = 1000; D[6] = 500; D[7] = 1000;}
if (Damage==6) {D[0] = 500; D[1] = 500; D[2] = 500; D[3] = 500; D[4] = 500; D[5] = 1000; D[6] = 1000; D[7] = 500;}
if (Damage==7) {D[0] = 500; D[1] = 500; D[2] = 500; D[3] = 500; D[4] = 500; D[5] = 1000; D[6] = 1000; D[7] = 1000;}
if (Damage==8) {D[0] = 500; D[1] = 500; D[2] = 500; D[3] = 500; D[4] = 1000; D[5] = 500; D[6] = 500; D[7] = 500;}
if (Damage==9) {D[0] = 500; D[1] = 500; D[2] = 500; D[3] = 500; D[4] = 1000; D[5] = 500; D[6] = 500; D[7] = 1000;}
if (Damage==10) {D[0] = 500; D[1] = 500; D[2] = 500; D[3] = 500; D[4] = 1000; D[5] = 500; D[6] = 1000; D[7] = 500;}
if (Damage==11) {D[0] = 500; D[1] = 500; D[2] = 500; D[3] = 500; D[4] = 1000; D[5] = 500; D[6] = 1000; D[7] = 1000;}
if (Damage==12) {D[0] = 500; D[1] = 500; D[2] = 500; D[3] = 500; D[4] = 1000; D[5] = 1000; D[6] = 500; D[7] = 500;}
if (Damage==13) {D[0] = 500; D[1] = 500; D[2] = 500; D[3] = 500; D[4] = 1000; D[5] = 1000; D[6] = 500; D[7] = 1000;}
if (Damage==14) {D[0] = 500; D[1] = 500; D[2] = 500; D[3] = 500; D[4] = 1000; D[5] = 1000; D[6] = 1000; D[7] = 500;}
if (Damage==15) {D[0] = 500; D[1] = 500; D[2] = 500; D[3] = 500; D[4] = 1000; D[5] = 1000; D[6] = 1000; D[7] = 1000;}
if (Damage==16) {D[0] = 500; D[1] = 500; D[2] = 500; D[3] = 1000; D[4] = 500; D[5] = 500; D[6] = 500; D[7] = 500;}
if (Damage==17) {D[0] = 500; D[1] = 500; D[2] = 500; D[3] = 1000; D[4] = 500; D[5] = 500; D[6] = 500; D[7] = 1000;}
if (Damage==18) {D[0] = 500; D[1] = 500; D[2] = 500; D[3] = 1000; D[4] = 500; D[5] = 500; D[6] = 1000; D[7] = 500;}
if (Damage==19) {D[0] = 500; D[1] = 500; D[2] = 500; D[3] = 1000; D[4] = 500; D[5] = 500; D[6] = 1000; D[7] = 1000;}
if (Damage==20) {D[0] = 500; D[1] = 500; D[2] = 500; D[3] = 1000; D[4] = 500; D[5] = 1000; D[6] = 500; D[7] = 500;}
if (Damage==21) {D[0] = 500; D[1] = 500; D[2] = 500; D[3] = 1000; D[4] = 500; D[5] = 1000; D[6] = 500; D[7] = 1000;}
if (Damage==22) {D[0] = 500; D[1] = 500; D[2] = 500; D[3] = 1000; D[4] = 500; D[5] = 1000; D[6] = 1000; D[7] = 500;}
if (Damage==23) {D[0] = 500; D[1] = 500; D[2] = 500; D[3] = 1000; D[4] = 500; D[5] = 1000; D[6] = 1000; D[7] = 1000;}
if (Damage==24) {D[0] = 500; D[1] = 500; D[2] = 500; D[3] = 1000; D[4] = 1000; D[5] = 500; D[6] = 500; D[7] = 500;}
if (Damage==25) {D[0] = 500; D[1] = 500; D[2] = 500; D[3] = 1000; D[4] = 1000; D[5] = 500; D[6] = 500; D[7] = 1000;}
if (Damage==26) {D[0] = 500; D[1] = 500; D[2] = 500; D[3] = 1000; D[4] = 1000; D[5] = 500; D[6] = 1000; D[7] = 500;}
if (Damage==27) {D[0] = 500; D[1] = 500; D[2] = 500; D[3] = 1000; D[4] = 1000; D[5] = 500; D[6] = 1000; D[7] = 1000;}
if (Damage==28) {D[0] = 500; D[1] = 500; D[2] = 500; D[3] = 1000; D[4] = 1000; D[5] = 1000; D[6] = 500; D[7] = 500;}
if (Damage==29) {D[0] = 500; D[1] = 500; D[2] = 500; D[3] = 1000; D[4] = 1000; D[5] = 1000; D[6] = 500; D[7] = 1000;}
if (Damage==30) {D[0] = 500; D[1] = 500; D[2] = 500; D[3] = 1000; D[4] = 1000; D[5] = 1000; D[6] = 1000; D[7] = 500;}
if (Damage==31) {D[0] = 500; D[1] = 500; D[2] = 500; D[3] = 1000; D[4] = 1000; D[5] = 1000; D[6] = 1000; D[7] = 1000;}
if (Damage==32) {D[0] = 500; D[1] = 500; D[2] = 1000; D[3] = 500; D[4] = 500; D[5] = 500; D[6] = 500; D[7] = 500;}
if (Damage==33) {D[0] = 500; D[1] = 500; D[2] = 1000; D[3] = 500; D[4] = 500; D[5] = 500; D[6] = 500; D[7] = 1000;}
if (Damage==34) {D[0] = 500; D[1] = 500; D[2] = 1000; D[3] = 500; D[4] = 500; D[5] = 500; D[6] = 1000; D[7] = 500;}
if (Damage==35) {D[0] = 500; D[1] = 500; D[2] = 1000; D[3] = 500; D[4] = 500; D[5] = 500; D[6] = 1000; D[7] = 1000;}
if (Damage==36) {D[0] = 500; D[1] = 500; D[2] = 1000; D[3] = 500; D[4] = 500; D[5] = 1000; D[6] = 500; D[7] = 500;}
if (Damage==37) {D[0] = 500; D[1] = 500; D[2] = 1000; D[3] = 500; D[4] = 500; D[5] = 1000; D[6] = 500; D[7] = 1000;}
if (Damage==38) {D[0] = 500; D[1] = 500; D[2] = 1000; D[3] = 500; D[4] = 500; D[5] = 1000; D[6] = 1000; D[7] = 500;}
if (Damage==39) {D[0] = 500; D[1] = 500; D[2] = 1000; D[3] = 500; D[4] = 500; D[5] = 1000; D[6] = 1000; D[7] = 1000;}
if (Damage==40) {D[0] = 500; D[1] = 500; D[2] = 1000; D[3] = 500; D[4] = 1000; D[5] = 500; D[6] = 500; D[7] = 500;}
if (Damage==41) {D[0] = 500; D[1] = 500; D[2] = 1000; D[3] = 500; D[4] = 1000; D[5] = 500; D[6] = 500; D[7] = 1000;}
if (Damage==42) {D[0] = 500; D[1] = 500; D[2] = 1000; D[3] = 500; D[4] = 1000; D[5] = 500; D[6] = 1000; D[7] = 500;}
if (Damage==43) {D[0] = 500; D[1] = 500; D[2] = 1000; D[3] = 500; D[4] = 1000; D[5] = 500; D[6] = 1000; D[7] = 1000;}
if (Damage==44) {D[0] = 500; D[1] = 500; D[2] = 1000; D[3] = 500; D[4] = 1000; D[5] = 1000; D[6] = 500; D[7] = 500;}
if (Damage==45) {D[0] = 500; D[1] = 500; D[2] = 1000; D[3] = 500; D[4] = 1000; D[5] = 1000; D[6] = 500; D[7] = 1000;}
if (Damage==46) {D[0] = 500; D[1] = 500; D[2] = 1000; D[3] = 500; D[4] = 1000; D[5] = 1000; D[6] = 1000; D[7] = 500;}
if (Damage==47) {D[0] = 500; D[1] = 500; D[2] = 1000; D[3] = 500; D[4] = 1000; D[5] = 1000; D[6] = 1000; D[7] = 1000;}
if (Damage==48) {D[0] = 500; D[1] = 500; D[2] = 1000; D[3] = 1000; D[4] = 500; D[5] = 500; D[6] = 500; D[7] = 500;}
if (Damage==49) {D[0] = 500; D[1] = 500; D[2] = 1000; D[3] = 1000; D[4] = 500; D[5] = 500; D[6] = 500; D[7] = 1000;}
if (Damage==50) {D[0] = 500; D[1] = 500; D[2] = 1000; D[3] = 1000; D[4] = 500; D[5] = 500; D[6] = 1000; D[7] = 500;}
if (Damage==51) {D[0] = 500; D[1] = 500; D[2] = 1000; D[3] = 1000; D[4] = 500; D[5] = 500; D[6] = 1000; D[7] = 1000;}
if (Damage==52) {D[0] = 500; D[1] = 500; D[2] = 1000; D[3] = 1000; D[4] = 500; D[5] = 1000; D[6] = 500; D[7] = 500;}
if (Damage==53) {D[0] = 500; D[1] = 500; D[2] = 1000; D[3] = 1000; D[4] = 500; D[5] = 1000; D[6] = 500; D[7] = 1000;}
if (Damage==54) {D[0] = 500; D[1] = 500; D[2] = 1000; D[3] = 1000; D[4] = 500; D[5] = 1000; D[6] = 1000; D[7] = 500;}
if (Damage==55) {D[0] = 500; D[1] = 500; D[2] = 1000; D[3] = 1000; D[4] = 500; D[5] = 1000; D[6] = 1000; D[7] = 1000;}
if (Damage==56) {D[0] = 500; D[1] = 500; D[2] = 1000; D[3] = 1000; D[4] = 1000; D[5] = 500; D[6] = 500; D[7] = 500;}
if (Damage==57) {D[0] = 500; D[1] = 500; D[2] = 1000; D[3] = 1000; D[4] = 1000; D[5] = 500; D[6] = 500; D[7] = 1000;}
if (Damage==58) {D[0] = 500; D[1] = 500; D[2] = 1000; D[3] = 1000; D[4] = 1000; D[5] = 500; D[6] = 1000; D[7] = 500;}
if (Damage==59) {D[0] = 500; D[1] = 500; D[2] = 1000; D[3] = 1000; D[4] = 1000; D[5] = 500; D[6] = 1000; D[7] = 1000;}
if (Damage==60) {D[0] = 500; D[1] = 500; D[2] = 1000; D[3] = 1000; D[4] = 1000; D[5] = 1000; D[6] = 500; D[7] = 500;}
if (Damage==61) {D[0] = 500; D[1] = 500; D[2] = 1000; D[3] = 1000; D[4] = 1000; D[5] = 1000; D[6] = 500; D[7] = 1000;}
if (Damage==62) {D[0] = 500; D[1] = 500; D[2] = 1000; D[3] = 1000; D[4] = 1000; D[5] = 1000; D[6] = 1000; D[7] = 500;}
if (Damage==63) {D[0] = 500; D[1] = 500; D[2] = 1000; D[3] = 1000; D[4] = 1000; D[5] = 1000; D[6] = 1000; D[7] = 1000;}
if (Damage==64) {D[0] = 500; D[1] = 1000; D[2] = 500; D[3] = 500; D[4] = 500; D[5] = 500; D[6] = 500; D[7] = 500;}
if (Damage==65) {D[0] = 500; D[1] = 1000; D[2] = 500; D[3] = 500; D[4] = 500; D[5] = 500; D[6] = 500; D[7] = 1000;}
if (Damage==66) {D[0] = 500; D[1] = 1000; D[2] = 500; D[3] = 500; D[4] = 500; D[5] = 500; D[6] = 1000; D[7] = 500;}
if (Damage==67) {D[0] = 500; D[1] = 1000; D[2] = 500; D[3] = 500; D[4] = 500; D[5] = 500; D[6] = 1000; D[7] = 1000;}
if (Damage==68) {D[0] = 500; D[1] = 1000; D[2] = 500; D[3] = 500; D[4] = 500; D[5] = 1000; D[6] = 500; D[7] = 500;}
if (Damage==69) {D[0] = 500; D[1] = 1000; D[2] = 500; D[3] = 500; D[4] = 500; D[5] = 1000; D[6] = 500; D[7] = 1000;}
if (Damage==70) {D[0] = 500; D[1] = 1000; D[2] = 500; D[3] = 500; D[4] = 500; D[5] = 1000; D[6] = 1000; D[7] = 500;}
if (Damage==71) {D[0] = 500; D[1] = 1000; D[2] = 500; D[3] = 500; D[4] = 500; D[5] = 1000; D[6] = 1000; D[7] = 1000;}
if (Damage==72) {D[0] = 500; D[1] = 1000; D[2] = 500; D[3] = 500; D[4] = 1000; D[5] = 500; D[6] = 500; D[7] = 500;}
if (Damage==73) {D[0] = 500; D[1] = 1000; D[2] = 500; D[3] = 500; D[4] = 1000; D[5] = 500; D[6] = 500; D[7] = 1000;}
if (Damage==74) {D[0] = 500; D[1] = 1000; D[2] = 500; D[3] = 500; D[4] = 1000; D[5] = 500; D[6] = 1000; D[7] = 500;}
if (Damage==75) {D[0] = 500; D[1] = 1000; D[2] = 500; D[3] = 500; D[4] = 1000; D[5] = 500; D[6] = 1000; D[7] = 1000;}
if (Damage==76) {D[0] = 500; D[1] = 1000; D[2] = 500; D[3] = 500; D[4] = 1000; D[5] = 1000; D[6] = 500; D[7] = 500;}
if (Damage==77) {D[0] = 500; D[1] = 1000; D[2] = 500; D[3] = 500; D[4] = 1000; D[5] = 1000; D[6] = 500; D[7] = 1000;}
if (Damage==78) {D[0] = 500; D[1] = 1000; D[2] = 500; D[3] = 500; D[4] = 1000; D[5] = 1000; D[6] = 1000; D[7] = 500;}
if (Damage==79) {D[0] = 500; D[1] = 1000; D[2] = 500; D[3] = 500; D[4] = 1000; D[5] = 1000; D[6] = 1000; D[7] = 1000;}
if (Damage==80) {D[0] = 500; D[1] = 1000; D[2] = 500; D[3] = 1000; D[4] = 500; D[5] = 500; D[6] = 500; D[7] = 500;}
if (Damage==81) {D[0] = 500; D[1] = 1000; D[2] = 500; D[3] = 1000; D[4] = 500; D[5] = 500; D[6] = 500; D[7] = 1000;}
if (Damage==82) {D[0] = 500; D[1] = 1000; D[2] = 500; D[3] = 1000; D[4] = 500; D[5] = 500; D[6] = 1000; D[7] = 500;}
if (Damage==83) {D[0] = 500; D[1] = 1000; D[2] = 500; D[3] = 1000; D[4] = 500; D[5] = 500; D[6] = 1000; D[7] = 1000;}
if (Damage==84) {D[0] = 500; D[1] = 1000; D[2] = 500; D[3] = 1000; D[4] = 500; D[5] = 1000; D[6] = 500; D[7] = 500;}
if (Damage==85) {D[0] = 500; D[1] = 1000; D[2] = 500; D[3] = 1000; D[4] = 500; D[5] = 1000; D[6] = 500; D[7] = 1000;}
if (Damage==86) {D[0] = 500; D[1] = 1000; D[2] = 500; D[3] = 1000; D[4] = 500; D[5] = 1000; D[6] = 1000; D[7] = 500;}
if (Damage==87) {D[0] = 500; D[1] = 1000; D[2] = 500; D[3] = 1000; D[4] = 500; D[5] = 1000; D[6] = 1000; D[7] = 1000;}
if (Damage==88) {D[0] = 500; D[1] = 1000; D[2] = 500; D[3] = 1000; D[4] = 1000; D[5] = 500; D[6] = 500; D[7] = 500;}
if (Damage==89) {D[0] = 500; D[1] = 1000; D[2] = 500; D[3] = 1000; D[4] = 1000; D[5] = 500; D[6] = 500; D[7] = 1000;}
if (Damage==90) {D[0] = 500; D[1] = 1000; D[2] = 500; D[3] = 1000; D[4] = 1000; D[5] = 500; D[6] = 1000; D[7] = 500;}
if (Damage==91) {D[0] = 500; D[1] = 1000; D[2] = 500; D[3] = 1000; D[4] = 1000; D[5] = 500; D[6] = 1000; D[7] = 1000;}
if (Damage==92) {D[0] = 500; D[1] = 1000; D[2] = 500; D[3] = 1000; D[4] = 1000; D[5] = 1000; D[6] = 500; D[7] = 500;}
if (Damage==93) {D[0] = 500; D[1] = 1000; D[2] = 500; D[3] = 1000; D[4] = 1000; D[5] = 1000; D[6] = 500; D[7] = 1000;}
if (Damage==94) {D[0] = 500; D[1] = 1000; D[2] = 500; D[3] = 1000; D[4] = 1000; D[5] = 1000; D[6] = 1000; D[7] = 500;}
if (Damage==95) {D[0] = 500; D[1] = 1000; D[2] = 500; D[3] = 1000; D[4] = 1000; D[5] = 1000; D[6] = 1000; D[7] = 1000;}
if (Damage==96) {D[0] = 500; D[1] = 1000; D[2] = 1000; D[3] = 500; D[4] = 500; D[5] = 500; D[6] = 500; D[7] = 500;}
if (Damage==97) {D[0] = 500; D[1] = 1000; D[2] = 1000; D[3] = 500; D[4] = 500; D[5] = 500; D[6] = 500; D[7] = 1000;}
if (Damage==98) {D[0] = 500; D[1] = 1000; D[2] = 1000; D[3] = 500; D[4] = 500; D[5] = 500; D[6] = 1000; D[7] = 500;}
if (Damage==99) {D[0] = 500; D[1] = 1000; D[2] = 1000; D[3] = 500; D[4] = 500; D[5] = 500; D[6] = 1000; D[7] = 1000;}
if (Damage==100) {D[0] = 500; D[1] = 1000; D[2] = 1000; D[3] = 500; D[4] = 500; D[5] = 1000; D[6] = 500; D[7] = 500;}
if (Damage==101) {D[0] = 500; D[1] = 1000; D[2] = 1000; D[3] = 500; D[4] = 500; D[5] = 1000; D[6] = 500; D[7] = 1000;}
if (Damage==102) {D[0] = 500; D[1] = 1000; D[2] = 1000; D[3] = 500; D[4] = 500; D[5] = 1000; D[6] = 1000; D[7] = 500;}
if (Damage==103) {D[0] = 500; D[1] = 1000; D[2] = 1000; D[3] = 500; D[4] = 500; D[5] = 1000; D[6] = 1000; D[7] = 1000;}
if (Damage==104) {D[0] = 500; D[1] = 1000; D[2] = 1000; D[3] = 500; D[4] = 1000; D[5] = 500; D[6] = 500; D[7] = 500;}
if (Damage==105) {D[0] = 500; D[1] = 1000; D[2] = 1000; D[3] = 500; D[4] = 1000; D[5] = 500; D[6] = 500; D[7] = 1000;}
if (Damage==106) {D[0] = 500; D[1] = 1000; D[2] = 1000; D[3] = 500; D[4] = 1000; D[5] = 500; D[6] = 1000; D[7] = 500;}
if (Damage==107) {D[0] = 500; D[1] = 1000; D[2] = 1000; D[3] = 500; D[4] = 1000; D[5] = 500; D[6] = 1000; D[7] = 1000;}
if (Damage==108) {D[0] = 500; D[1] = 1000; D[2] = 1000; D[3] = 500; D[4] = 1000; D[5] = 1000; D[6] = 500; D[7] = 500;}
if (Damage==109) {D[0] = 500; D[1] = 1000; D[2] = 1000; D[3] = 500; D[4] = 1000; D[5] = 1000; D[6] = 500; D[7] = 1000;}
if (Damage==110) {D[0] = 500; D[1] = 1000; D[2] = 1000; D[3] = 500; D[4] = 1000; D[5] = 1000; D[6] = 1000; D[7] = 500;}
if (Damage==111) {D[0] = 500; D[1] = 1000; D[2] = 1000; D[3] = 500; D[4] = 1000; D[5] = 1000; D[6] = 1000; D[7] = 1000;}
if (Damage==112) {D[0] = 500; D[1] = 1000; D[2] = 1000; D[3] = 1000; D[4] = 500; D[5] = 500; D[6] = 500; D[7] = 500;}
if (Damage==113) {D[0] = 500; D[1] = 1000; D[2] = 1000; D[3] = 1000; D[4] = 500; D[5] = 500; D[6] = 500; D[7] = 1000;}
if (Damage==114) {D[0] = 500; D[1] = 1000; D[2] = 1000; D[3] = 1000; D[4] = 500; D[5] = 500; D[6] = 1000; D[7] = 500;}
if (Damage==115) {D[0] = 500; D[1] = 1000; D[2] = 1000; D[3] = 1000; D[4] = 500; D[5] = 500; D[6] = 1000; D[7] = 1000;}
if (Damage==116) {D[0] = 500; D[1] = 1000; D[2] = 1000; D[3] = 1000; D[4] = 500; D[5] = 1000; D[6] = 500; D[7] = 500;}
if (Damage==117) {D[0] = 500; D[1] = 1000; D[2] = 1000; D[3] = 1000; D[4] = 500; D[5] = 1000; D[6] = 500; D[7] = 1000;}
if (Damage==118) {D[0] = 500; D[1] = 1000; D[2] = 1000; D[3] = 1000; D[4] = 500; D[5] = 1000; D[6] = 1000; D[7] = 500;}
if (Damage==119) {D[0] = 500; D[1] = 1000; D[2] = 1000; D[3] = 1000; D[4] = 500; D[5] = 1000; D[6] = 1000; D[7] = 1000;}
if (Damage==120) {D[0] = 500; D[1] = 1000; D[2] = 1000; D[3] = 1000; D[4] = 1000; D[5] = 500; D[6] = 500; D[7] = 500;}
if (Damage==121) {D[0] = 500; D[1] = 1000; D[2] = 1000; D[3] = 1000; D[4] = 1000; D[5] = 500; D[6] = 500; D[7] = 1000;}
if (Damage==122) {D[0] = 500; D[1] = 1000; D[2] = 1000; D[3] = 1000; D[4] = 1000; D[5] = 500; D[6] = 1000; D[7] = 500;}
if (Damage==123) {D[0] = 500; D[1] = 1000; D[2] = 1000; D[3] = 1000; D[4] = 1000; D[5] = 500; D[6] = 1000; D[7] = 1000;}
if (Damage==124) {D[0] = 500; D[1] = 1000; D[2] = 1000; D[3] = 1000; D[4] = 1000; D[5] = 1000; D[6] = 500; D[7] = 500;}
if (Damage==125) {D[0] = 500; D[1] = 1000; D[2] = 1000; D[3] = 1000; D[4] = 1000; D[5] = 1000; D[6] = 500; D[7] = 1000;}
if (Damage==126) {D[0] = 500; D[1] = 1000; D[2] = 1000; D[3] = 1000; D[4] = 1000; D[5] = 1000; D[6] = 1000; D[7] = 500;}
if (Damage==127) {D[0] = 500; D[1] = 1000; D[2] = 1000; D[3] = 1000; D[4] = 1000; D[5] = 1000; D[6] = 1000; D[7] = 1000;}
if (Damage==128) {D[0] = 1000; D[1] = 500; D[2] = 500; D[3] = 500; D[4] = 500; D[5] = 500; D[6] = 500; D[7] = 500;}
if (Damage==129) {D[0] = 1000; D[1] = 500; D[2] = 500; D[3] = 500; D[4] = 500; D[5] = 500; D[6] = 500; D[7] = 1000;}
if (Damage==130) {D[0] = 1000; D[1] = 500; D[2] = 500; D[3] = 500; D[4] = 500; D[5] = 500; D[6] = 1000; D[7] = 500;}
if (Damage==131) {D[0] = 1000; D[1] = 500; D[2] = 500; D[3] = 500; D[4] = 500; D[5] = 500; D[6] = 1000; D[7] = 1000;}
if (Damage==132) {D[0] = 1000; D[1] = 500; D[2] = 500; D[3] = 500; D[4] = 500; D[5] = 1000; D[6] = 500; D[7] = 500;}
if (Damage==133) {D[0] = 1000; D[1] = 500; D[2] = 500; D[3] = 500; D[4] = 500; D[5] = 1000; D[6] = 500; D[7] = 1000;}
if (Damage==134) {D[0] = 1000; D[1] = 500; D[2] = 500; D[3] = 500; D[4] = 500; D[5] = 1000; D[6] = 1000; D[7] = 500;}
if (Damage==135) {D[0] = 1000; D[1] = 500; D[2] = 500; D[3] = 500; D[4] = 500; D[5] = 1000; D[6] = 1000; D[7] = 1000;}
if (Damage==136) {D[0] = 1000; D[1] = 500; D[2] = 500; D[3] = 500; D[4] = 1000; D[5] = 500; D[6] = 500; D[7] = 500;}
if (Damage==137) {D[0] = 1000; D[1] = 500; D[2] = 500; D[3] = 500; D[4] = 1000; D[5] = 500; D[6] = 500; D[7] = 1000;}
if (Damage==138) {D[0] = 1000; D[1] = 500; D[2] = 500; D[3] = 500; D[4] = 1000; D[5] = 500; D[6] = 1000; D[7] = 500;}
if (Damage==139) {D[0] = 1000; D[1] = 500; D[2] = 500; D[3] = 500; D[4] = 1000; D[5] = 500; D[6] = 1000; D[7] = 1000;}
if (Damage==140) {D[0] = 1000; D[1] = 500; D[2] = 500; D[3] = 500; D[4] = 1000; D[5] = 1000; D[6] = 500; D[7] = 500;}
if (Damage==141) {D[0] = 1000; D[1] = 500; D[2] = 500; D[3] = 500; D[4] = 1000; D[5] = 1000; D[6] = 500; D[7] = 1000;}
if (Damage==142) {D[0] = 1000; D[1] = 500; D[2] = 500; D[3] = 500; D[4] = 1000; D[5] = 1000; D[6] = 1000; D[7] = 500;}
if (Damage==143) {D[0] = 1000; D[1] = 500; D[2] = 500; D[3] = 500; D[4] = 1000; D[5] = 1000; D[6] = 1000; D[7] = 1000;}
if (Damage==144) {D[0] = 1000; D[1] = 500; D[2] = 500; D[3] = 1000; D[4] = 500; D[5] = 500; D[6] = 500; D[7] = 500;}
if (Damage==145) {D[0] = 1000; D[1] = 500; D[2] = 500; D[3] = 1000; D[4] = 500; D[5] = 500; D[6] = 500; D[7] = 1000;}
if (Damage==146) {D[0] = 1000; D[1] = 500; D[2] = 500; D[3] = 1000; D[4] = 500; D[5] = 500; D[6] = 1000; D[7] = 500;}
if (Damage==147) {D[0] = 1000; D[1] = 500; D[2] = 500; D[3] = 1000; D[4] = 500; D[5] = 500; D[6] = 1000; D[7] = 1000;}
if (Damage==148) {D[0] = 1000; D[1] = 500; D[2] = 500; D[3] = 1000; D[4] = 500; D[5] = 1000; D[6] = 500; D[7] = 500;}
if (Damage==149) {D[0] = 1000; D[1] = 500; D[2] = 500; D[3] = 1000; D[4] = 500; D[5] = 1000; D[6] = 500; D[7] = 1000;}
if (Damage==150) {D[0] = 1000; D[1] = 500; D[2] = 500; D[3] = 1000; D[4] = 500; D[5] = 1000; D[6] = 1000; D[7] = 500;}
if (Damage==151) {D[0] = 1000; D[1] = 500; D[2] = 500; D[3] = 1000; D[4] = 500; D[5] = 1000; D[6] = 1000; D[7] = 1000;}
if (Damage==152) {D[0] = 1000; D[1] = 500; D[2] = 500; D[3] = 1000; D[4] = 1000; D[5] = 500; D[6] = 500; D[7] = 500;}
if (Damage==153) {D[0] = 1000; D[1] = 500; D[2] = 500; D[3] = 1000; D[4] = 1000; D[5] = 500; D[6] = 500; D[7] = 1000;}
if (Damage==154) {D[0] = 1000; D[1] = 500; D[2] = 500; D[3] = 1000; D[4] = 1000; D[5] = 500; D[6] = 1000; D[7] = 500;}
if (Damage==155) {D[0] = 1000; D[1] = 500; D[2] = 500; D[3] = 1000; D[4] = 1000; D[5] = 500; D[6] = 1000; D[7] = 1000;}
if (Damage==156) {D[0] = 1000; D[1] = 500; D[2] = 500; D[3] = 1000; D[4] = 1000; D[5] = 1000; D[6] = 500; D[7] = 500;}
if (Damage==157) {D[0] = 1000; D[1] = 500; D[2] = 500; D[3] = 1000; D[4] = 1000; D[5] = 1000; D[6] = 500; D[7] = 1000;}
if (Damage==158) {D[0] = 1000; D[1] = 500; D[2] = 500; D[3] = 1000; D[4] = 1000; D[5] = 1000; D[6] = 1000; D[7] = 500;}
if (Damage==159) {D[0] = 1000; D[1] = 500; D[2] = 500; D[3] = 1000; D[4] = 1000; D[5] = 1000; D[6] = 1000; D[7] = 1000;}
if (Damage==160) {D[0] = 1000; D[1] = 500; D[2] = 1000; D[3] = 500; D[4] = 500; D[5] = 500; D[6] = 500; D[7] = 500;}
if (Damage==161) {D[0] = 1000; D[1] = 500; D[2] = 1000; D[3] = 500; D[4] = 500; D[5] = 500; D[6] = 500; D[7] = 1000;}
if (Damage==162) {D[0] = 1000; D[1] = 500; D[2] = 1000; D[3] = 500; D[4] = 500; D[5] = 500; D[6] = 1000; D[7] = 500;}
if (Damage==163) {D[0] = 1000; D[1] = 500; D[2] = 1000; D[3] = 500; D[4] = 500; D[5] = 500; D[6] = 1000; D[7] = 1000;}
if (Damage==164) {D[0] = 1000; D[1] = 500; D[2] = 1000; D[3] = 500; D[4] = 500; D[5] = 1000; D[6] = 500; D[7] = 500;}
if (Damage==165) {D[0] = 1000; D[1] = 500; D[2] = 1000; D[3] = 500; D[4] = 500; D[5] = 1000; D[6] = 500; D[7] = 1000;}
if (Damage==166) {D[0] = 1000; D[1] = 500; D[2] = 1000; D[3] = 500; D[4] = 500; D[5] = 1000; D[6] = 1000; D[7] = 500;}
if (Damage==167) {D[0] = 1000; D[1] = 500; D[2] = 1000; D[3] = 500; D[4] = 500; D[5] = 1000; D[6] = 1000; D[7] = 1000;}
if (Damage==168) {D[0] = 1000; D[1] = 500; D[2] = 1000; D[3] = 500; D[4] = 1000; D[5] = 500; D[6] = 500; D[7] = 500;}
if (Damage==169) {D[0] = 1000; D[1] = 500; D[2] = 1000; D[3] = 500; D[4] = 1000; D[5] = 500; D[6] = 500; D[7] = 1000;}
if (Damage==170) {D[0] = 1000; D[1] = 500; D[2] = 1000; D[3] = 500; D[4] = 1000; D[5] = 500; D[6] = 1000; D[7] = 500;}
if (Damage==171) {D[0] = 1000; D[1] = 500; D[2] = 1000; D[3] = 500; D[4] = 1000; D[5] = 500; D[6] = 1000; D[7] = 1000;}
if (Damage==172) {D[0] = 1000; D[1] = 500; D[2] = 1000; D[3] = 500; D[4] = 1000; D[5] = 1000; D[6] = 500; D[7] = 500;}
if (Damage==173) {D[0] = 1000; D[1] = 500; D[2] = 1000; D[3] = 500; D[4] = 1000; D[5] = 1000; D[6] = 500; D[7] = 1000;}
if (Damage==174) {D[0] = 1000; D[1] = 500; D[2] = 1000; D[3] = 500; D[4] = 1000; D[5] = 1000; D[6] = 1000; D[7] = 500;}
if (Damage==175) {D[0] = 1000; D[1] = 500; D[2] = 1000; D[3] = 500; D[4] = 1000; D[5] = 1000; D[6] = 1000; D[7] = 1000;}
if (Damage==176) {D[0] = 1000; D[1] = 500; D[2] = 1000; D[3] = 1000; D[4] = 500; D[5] = 500; D[6] = 500; D[7] = 500;}
if (Damage==177) {D[0] = 1000; D[1] = 500; D[2] = 1000; D[3] = 1000; D[4] = 500; D[5] = 500; D[6] = 500; D[7] = 1000;}
if (Damage==178) {D[0] = 1000; D[1] = 500; D[2] = 1000; D[3] = 1000; D[4] = 500; D[5] = 500; D[6] = 1000; D[7] = 500;}
if (Damage==179) {D[0] = 1000; D[1] = 500; D[2] = 1000; D[3] = 1000; D[4] = 500; D[5] = 500; D[6] = 1000; D[7] = 1000;}
if (Damage==180) {D[0] = 1000; D[1] = 500; D[2] = 1000; D[3] = 1000; D[4] = 500; D[5] = 1000; D[6] = 500; D[7] = 500;}
if (Damage==181) {D[0] = 1000; D[1] = 500; D[2] = 1000; D[3] = 1000; D[4] = 500; D[5] = 1000; D[6] = 500; D[7] = 1000;}
if (Damage==182) {D[0] = 1000; D[1] = 500; D[2] = 1000; D[3] = 1000; D[4] = 500; D[5] = 1000; D[6] = 1000; D[7] = 500;}
if (Damage==183) {D[0] = 1000; D[1] = 500; D[2] = 1000; D[3] = 1000; D[4] = 500; D[5] = 1000; D[6] = 1000; D[7] = 1000;}
if (Damage==184) {D[0] = 1000; D[1] = 500; D[2] = 1000; D[3] = 1000; D[4] = 1000; D[5] = 500; D[6] = 500; D[7] = 500;}
if (Damage==185) {D[0] = 1000; D[1] = 500; D[2] = 1000; D[3] = 1000; D[4] = 1000; D[5] = 500; D[6] = 500; D[7] = 1000;}
if (Damage==186) {D[0] = 1000; D[1] = 500; D[2] = 1000; D[3] = 1000; D[4] = 1000; D[5] = 500; D[6] = 1000; D[7] = 500;}
if (Damage==187) {D[0] = 1000; D[1] = 500; D[2] = 1000; D[3] = 1000; D[4] = 1000; D[5] = 500; D[6] = 1000; D[7] = 1000;}
if (Damage==188) {D[0] = 1000; D[1] = 500; D[2] = 1000; D[3] = 1000; D[4] = 1000; D[5] = 1000; D[6] = 500; D[7] = 500;}
if (Damage==189) {D[0] = 1000; D[1] = 500; D[2] = 1000; D[3] = 1000; D[4] = 1000; D[5] = 1000; D[6] = 500; D[7] = 1000;}
if (Damage==190) {D[0] = 1000; D[1] = 500; D[2] = 1000; D[3] = 1000; D[4] = 1000; D[5] = 1000; D[6] = 1000; D[7] = 500;}
if (Damage==191) {D[0] = 1000; D[1] = 500; D[2] = 1000; D[3] = 1000; D[4] = 1000; D[5] = 1000; D[6] = 1000; D[7] = 1000;}
if (Damage==192) {D[0] = 1000; D[1] = 1000; D[2] = 500; D[3] = 500; D[4] = 500; D[5] = 500; D[6] = 500; D[7] = 500;}
if (Damage==193) {D[0] = 1000; D[1] = 1000; D[2] = 500; D[3] = 500; D[4] = 500; D[5] = 500; D[6] = 500; D[7] = 1000;}
if (Damage==194) {D[0] = 1000; D[1] = 1000; D[2] = 500; D[3] = 500; D[4] = 500; D[5] = 500; D[6] = 1000; D[7] = 500;}
if (Damage==195) {D[0] = 1000; D[1] = 1000; D[2] = 500; D[3] = 500; D[4] = 500; D[5] = 500; D[6] = 1000; D[7] = 1000;}
if (Damage==196) {D[0] = 1000; D[1] = 1000; D[2] = 500; D[3] = 500; D[4] = 500; D[5] = 1000; D[6] = 500; D[7] = 500;}
if (Damage==197) {D[0] = 1000; D[1] = 1000; D[2] = 500; D[3] = 500; D[4] = 500; D[5] = 1000; D[6] = 500; D[7] = 1000;}
if (Damage==198) {D[0] = 1000; D[1] = 1000; D[2] = 500; D[3] = 500; D[4] = 500; D[5] = 1000; D[6] = 1000; D[7] = 500;}
if (Damage==199) {D[0] = 1000; D[1] = 1000; D[2] = 500; D[3] = 500; D[4] = 500; D[5] = 1000; D[6] = 1000; D[7] = 1000;}
if (Damage==200) {D[0] = 1000; D[1] = 1000; D[2] = 500; D[3] = 500; D[4] = 1000; D[5] = 500; D[6] = 500; D[7] = 500;}
if (Damage==201) {D[0] = 1000; D[1] = 1000; D[2] = 500; D[3] = 500; D[4] = 1000; D[5] = 500; D[6] = 500; D[7] = 1000;}
if (Damage==202) {D[0] = 1000; D[1] = 1000; D[2] = 500; D[3] = 500; D[4] = 1000; D[5] = 500; D[6] = 1000; D[7] = 500;}
if (Damage==203) {D[0] = 1000; D[1] = 1000; D[2] = 500; D[3] = 500; D[4] = 1000; D[5] = 500; D[6] = 1000; D[7] = 1000;}
if (Damage==204) {D[0] = 1000; D[1] = 1000; D[2] = 500; D[3] = 500; D[4] = 1000; D[5] = 1000; D[6] = 500; D[7] = 500;}
if (Damage==205) {D[0] = 1000; D[1] = 1000; D[2] = 500; D[3] = 500; D[4] = 1000; D[5] = 1000; D[6] = 500; D[7] = 1000;}
if (Damage==206) {D[0] = 1000; D[1] = 1000; D[2] = 500; D[3] = 500; D[4] = 1000; D[5] = 1000; D[6] = 1000; D[7] = 500;}
if (Damage==207) {D[0] = 1000; D[1] = 1000; D[2] = 500; D[3] = 500; D[4] = 1000; D[5] = 1000; D[6] = 1000; D[7] = 1000;}
if (Damage==208) {D[0] = 1000; D[1] = 1000; D[2] = 500; D[3] = 1000; D[4] = 500; D[5] = 500; D[6] = 500; D[7] = 500;}
if (Damage==209) {D[0] = 1000; D[1] = 1000; D[2] = 500; D[3] = 1000; D[4] = 500; D[5] = 500; D[6] = 500; D[7] = 1000;}
if (Damage==210) {D[0] = 1000; D[1] = 1000; D[2] = 500; D[3] = 1000; D[4] = 500; D[5] = 500; D[6] = 1000; D[7] = 500;}
if (Damage==211) {D[0] = 1000; D[1] = 1000; D[2] = 500; D[3] = 1000; D[4] = 500; D[5] = 500; D[6] = 1000; D[7] = 1000;}
if (Damage==212) {D[0] = 1000; D[1] = 1000; D[2] = 500; D[3] = 1000; D[4] = 500; D[5] = 1000; D[6] = 500; D[7] = 500;}
if (Damage==213) {D[0] = 1000; D[1] = 1000; D[2] = 500; D[3] = 1000; D[4] = 500; D[5] = 1000; D[6] = 500; D[7] = 1000;}
if (Damage==214) {D[0] = 1000; D[1] = 1000; D[2] = 500; D[3] = 1000; D[4] = 500; D[5] = 1000; D[6] = 1000; D[7] = 500;}
if (Damage==215) {D[0] = 1000; D[1] = 1000; D[2] = 500; D[3] = 1000; D[4] = 500; D[5] = 1000; D[6] = 1000; D[7] = 1000;}
if (Damage==216) {D[0] = 1000; D[1] = 1000; D[2] = 500; D[3] = 1000; D[4] = 1000; D[5] = 500; D[6] = 500; D[7] = 500;}
if (Damage==217) {D[0] = 1000; D[1] = 1000; D[2] = 500; D[3] = 1000; D[4] = 1000; D[5] = 500; D[6] = 500; D[7] = 1000;}
if (Damage==218) {D[0] = 1000; D[1] = 1000; D[2] = 500; D[3] = 1000; D[4] = 1000; D[5] = 500; D[6] = 1000; D[7] = 500;}
if (Damage==219) {D[0] = 1000; D[1] = 1000; D[2] = 500; D[3] = 1000; D[4] = 1000; D[5] = 500; D[6] = 1000; D[7] = 1000;}
if (Damage==220) {D[0] = 1000; D[1] = 1000; D[2] = 500; D[3] = 1000; D[4] = 1000; D[5] = 1000; D[6] = 500; D[7] = 500;}
if (Damage==221) {D[0] = 1000; D[1] = 1000; D[2] = 500; D[3] = 1000; D[4] = 1000; D[5] = 1000; D[6] = 500; D[7] = 1000;}
if (Damage==222) {D[0] = 1000; D[1] = 1000; D[2] = 500; D[3] = 1000; D[4] = 1000; D[5] = 1000; D[6] = 1000; D[7] = 500;}
if (Damage==223) {D[0] = 1000; D[1] = 1000; D[2] = 500; D[3] = 1000; D[4] = 1000; D[5] = 1000; D[6] = 1000; D[7] = 1000;}
if (Damage==224) {D[0] = 1000; D[1] = 1000; D[2] = 1000; D[3] = 500; D[4] = 500; D[5] = 500; D[6] = 500; D[7] = 500;}
if (Damage==225) {D[0] = 1000; D[1] = 1000; D[2] = 1000; D[3] = 500; D[4] = 500; D[5] = 500; D[6] = 500; D[7] = 1000;}
if (Damage==226) {D[0] = 1000; D[1] = 1000; D[2] = 1000; D[3] = 500; D[4] = 500; D[5] = 500; D[6] = 1000; D[7] = 500;}
if (Damage==227) {D[0] = 1000; D[1] = 1000; D[2] = 1000; D[3] = 500; D[4] = 500; D[5] = 500; D[6] = 1000; D[7] = 1000;}
if (Damage==228) {D[0] = 1000; D[1] = 1000; D[2] = 1000; D[3] = 500; D[4] = 500; D[5] = 1000; D[6] = 500; D[7] = 500;}
if (Damage==229) {D[0] = 1000; D[1] = 1000; D[2] = 1000; D[3] = 500; D[4] = 500; D[5] = 1000; D[6] = 500; D[7] = 1000;}
if (Damage==230) {D[0] = 1000; D[1] = 1000; D[2] = 1000; D[3] = 500; D[4] = 500; D[5] = 1000; D[6] = 1000; D[7] = 500;}
if (Damage==231) {D[0] = 1000; D[1] = 1000; D[2] = 1000; D[3] = 500; D[4] = 500; D[5] = 1000; D[6] = 1000; D[7] = 1000;}
if (Damage==232) {D[0] = 1000; D[1] = 1000; D[2] = 1000; D[3] = 500; D[4] = 1000; D[5] = 500; D[6] = 500; D[7] = 500;}
if (Damage==233) {D[0] = 1000; D[1] = 1000; D[2] = 1000; D[3] = 500; D[4] = 1000; D[5] = 500; D[6] = 500; D[7] = 1000;}
if (Damage==234) {D[0] = 1000; D[1] = 1000; D[2] = 1000; D[3] = 500; D[4] = 1000; D[5] = 500; D[6] = 1000; D[7] = 500;}
if (Damage==235) {D[0] = 1000; D[1] = 1000; D[2] = 1000; D[3] = 500; D[4] = 1000; D[5] = 500; D[6] = 1000; D[7] = 1000;}
if (Damage==236) {D[0] = 1000; D[1] = 1000; D[2] = 1000; D[3] = 500; D[4] = 1000; D[5] = 1000; D[6] = 500; D[7] = 500;}
if (Damage==237) {D[0] = 1000; D[1] = 1000; D[2] = 1000; D[3] = 500; D[4] = 1000; D[5] = 1000; D[6] = 500; D[7] = 1000;}
if (Damage==238) {D[0] = 1000; D[1] = 1000; D[2] = 1000; D[3] = 500; D[4] = 1000; D[5] = 1000; D[6] = 1000; D[7] = 500;}
if (Damage==239) {D[0] = 1000; D[1] = 1000; D[2] = 1000; D[3] = 500; D[4] = 1000; D[5] = 1000; D[6] = 1000; D[7] = 1000;}
if (Damage==240) {D[0] = 1000; D[1] = 1000; D[2] = 1000; D[3] = 1000; D[4] = 500; D[5] = 500; D[6] = 500; D[7] = 500;}
if (Damage==241) {D[0] = 1000; D[1] = 1000; D[2] = 1000; D[3] = 1000; D[4] = 500; D[5] = 500; D[6] = 500; D[7] = 1000;}
if (Damage==242) {D[0] = 1000; D[1] = 1000; D[2] = 1000; D[3] = 1000; D[4] = 500; D[5] = 500; D[6] = 1000; D[7] = 500;}
if (Damage==243) {D[0] = 1000; D[1] = 1000; D[2] = 1000; D[3] = 1000; D[4] = 500; D[5] = 500; D[6] = 1000; D[7] = 1000;}
if (Damage==244) {D[0] = 1000; D[1] = 1000; D[2] = 1000; D[3] = 1000; D[4] = 500; D[5] = 1000; D[6] = 500; D[7] = 500;}
if (Damage==245) {D[0] = 1000; D[1] = 1000; D[2] = 1000; D[3] = 1000; D[4] = 500; D[5] = 1000; D[6] = 500; D[7] = 1000;}
if (Damage==246) {D[0] = 1000; D[1] = 1000; D[2] = 1000; D[3] = 1000; D[4] = 500; D[5] = 1000; D[6] = 1000; D[7] = 500;}
if (Damage==247) {D[0] = 1000; D[1] = 1000; D[2] = 1000; D[3] = 1000; D[4] = 500; D[5] = 1000; D[6] = 1000; D[7] = 1000;}
if (Damage==248) {D[0] = 1000; D[1] = 1000; D[2] = 1000; D[3] = 1000; D[4] = 1000; D[5] = 500; D[6] = 500; D[7] = 500;}
if (Damage==249) {D[0] = 1000; D[1] = 1000; D[2] = 1000; D[3] = 1000; D[4] = 1000; D[5] = 500; D[6] = 500; D[7] = 1000;}
if (Damage==250) {D[0] = 1000; D[1] = 1000; D[2] = 1000; D[3] = 1000; D[4] = 1000; D[5] = 500; D[6] = 1000; D[7] = 500;}
if (Damage==251) {D[0] = 1000; D[1] = 1000; D[2] = 1000; D[3] = 1000; D[4] = 1000; D[5] = 500; D[6] = 1000; D[7] = 1000;}
if (Damage==252) {D[0] = 1000; D[1] = 1000; D[2] = 1000; D[3] = 1000; D[4] = 1000; D[5] = 1000; D[6] = 500; D[7] = 500;}
if (Damage==253) {D[0] = 1000; D[1] = 1000; D[2] = 1000; D[3] = 1000; D[4] = 1000; D[5] = 1000; D[6] = 500; D[7] = 1000;}
if (Damage==254) {D[0] = 1000; D[1] = 1000; D[2] = 1000; D[3] = 1000; D[4] = 1000; D[5] = 1000; D[6] = 1000; D[7] = 500;}
if (Damage==255) {D[0] = 1000; D[1] = 1000; D[2] = 1000; D[3] = 1000; D[4] = 1000; D[5] = 1000; D[6] = 1000; D[7] = 1000;}
// Sets Critical
if (Critical==1){C[0]=1000;}
  else {C[0]=525;}
// Sets Power
if (Power==0){X[0] = 500; X[1] = 500;}
if (Power==1){X[0] = 500; X[1] = 1000;}
if (Power==2){X[0] = 1000; X[1] = 500;}
if (Power==3){X[0] = 1000; X[1] = 1000;}
paritycheck();
PrintTag();
}

// Handler function for a single click:
static void handlelongstop() {
    //sleep(1000);
    Explosion();
    SendIR();   
    Serial.println("Clicked!");
}
static void handlelongstart(){
    //sleep(1000);
    Serial.println("Reset!");
}

void setup()
{
    // start serial and filesystem
    Serial.begin(SERIAL_BAUD_RATE);
    FastLED.addLeds<LED_TYPE, DATA_PIN, COLOR_ORDER>(leds, NUM_LEDS);  // GRB ordering is typical
    FastLED.setBrightness(BRIGHTNESS);
    btn.attachLongPressStop(handlelongstop);
    //btn.attachLongPressStart(handlelongstart);
    if(btn.state()==HIGH){
            // start ESP32-SvelteKit
    Serial.println("HIGH");
    esp32sveltekit.begin();
    // load the initial light settings
    lightStateService.begin();
    // start the light service
    lightMqttSettingsService.begin();
    } 
    pinMode(IRledPin, OUTPUT);
    // Single Click event attachment
    SetIRProtocol();
}

void loop()
{
    btn.tick(); 
}